<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
   
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
   
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
   
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <!-- tostify -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script src="script.js"></script>
    <style>
      .title {
        color: brown;
        font-size: 2em;
        font-weight: bold;
      }
      .smalldiv {
        display: flex;
        padding: 8px;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 6px;
        background-color:lightgrey;
        margin: 5px;
        height: 5rem;
        font-size: 30px;
        font-weight: bold;
      }
      .heading {
        color: rgb(168, 60, 60);
      }

      .book-image {
        max-width: 50px;
        margin-right: 10px;
      }
      .para {
        font-size: bold;
        color: #eec4c4;
      }
      .fake-review {
      border: 1px solid #ddd;
      padding: 20px;
      text-align: center;
      background-color: #f9f9f9;
    }
    .styled-input {
      border: 1px solid #ddd;
      padding: 10px;
      width: 100%;

    }

    .styled-input::placeholder {
      color: #999; /* Set the color of the placeholder text */
      font-size: 25px;
      text-align: left;
    }
    .new_realise {
      max-width: 100%; /* Make the image responsive */
      width: 800px; /* Set the maximum width of the image */
      height: auto; /* Maintain aspect ratio */
      border-radius: 10px; /* Set border-radius for rounded corners */
      animation: zoomInOut 2s infinite alternate; /* Apply zoom in and out animation */
      display: block; /* Ensure block display for margin auto to work */
      margin: auto; /* Center the image horizontally */
      object-fit: cover; /* Maintain aspect ratio and cover the container */
      cursor: pointer; /* Add a pointer cursor for clickability */
    }

    @keyframes zoomInOut {
      0% {
        transform: scale(1); /* Initial scale (normal size) */
      }
      100% {
        transform: scale(1.2); /* Final scale (zoomed in) */
      }
    }

    .sidebar {
            width: 250px;
            height: 100%;
            position: fixed;
            top: 0;
            left: -250px;
            background-color: #f1f1f1;
            padding-top: 20px;
            transition: 0.5s;
        }

        .sidebar a {
            padding: 8px 8px 8px 32px;
            text-decoration: none;
            font-size: 18px;
            color: #000;
            display: block;
            transition: 0.3s;
        }

        .sidebar a:hover {
            color: #007bff;
        }

        /* Content styles */
        .content {
            margin-left: 250px;
            padding: 15px;
        }

    </style>
  </head>
  <body>
    <!-- Title -->
    <div class="container-fluid my-5">
      <div class="container text-center">
        <h1
          class="display-6 fw-bold heading animate__animated animate__fadeIn font-family-poppins"
        >
          My Bookstore ðŸ“š
        </h1>
        <p class="lead para text-muted">
          Discover the world of literature at your fingertips.
        </p>
      </div>
    </div>

    <!-- Accounts and Management -->
    <div class="container-fluid my-3">
      <div class="container">
        <div class="row justify-content-around d-flex">
          <div class="col justify-content-center my-3 my-md-0">
            <div class="d-flex justify-content-center">
              <div
                class="border border-2 border-muted py-3 px-5 rounded-3 text-center position-relative"
                style="height: 200px; width: 300px"
              >
                <div
                  class="d-flex mx-auto justify-content-center align-items-center rounded-circle"
                  style="width: 100px; height: 100px; background-color:lightgrey"
                >
                  <img
                    src="images/icon.png"
                    alt="img"
                    class="img-fluid rounded-circle"
                    style="height: 50px; width: 50px"
                  />
                </div>
                <p class="my-4" style="font-size: 25px;">Borrowed Books</p>
              </div>
            </div>
          </div>
          
         
          <div class="col justify-content-center my-3 my-md-0"  onclick="redirectToAnotherPage()" style="cursor: pointer;">
            <div class="d-flex justify-content-center">
              <div
                class="border border-2 border-muted py-3 px-5 rounded-3 text-center position-relative"
                style="height: 200px; width: 300px"
              >
                <div
                  class="d-flex mx-auto justify-content-center align-items-center rounded-circle"
                  style="width: 100px; height: 100px; background-color:lightgrey"
                >
                  <img
                    src="images/icon (1).png"
                    alt="img"
                    class="img-fluid rounded-circle"
                    style="height: 50px; width: 50px"
                  />
                </div>
                <p class="my-4" style="font-size: 25px;">Available Books</p>
              </div>
            </div>
          </div>


          <!-- <div class="col justify-content-center my-3 my-md-0">
            <div class="d-flex justify-content-center">
              <div
                class="border border-2 border-muted py-3 px-5 rounded-3 text-center position-relative"
                style="height: 200px; width: 300px"
              >
                <div
                  class="d-flex mx-auto justify-content-center align-items-center rounded-circle"
                  style="width: 100px; height: 100px; background-color:lightgrey"
                >
                  <img
                    src="images/icon (2).png"
                    alt="img"
                    class="img-fluid rounded-circle"
                    style="height: 50px; width: 50px"
                  />
                </div>
                <p class="my-4" style="font-size: 25px;">My Accounts</p>
              </div>
            </div>
          </div> -->
          <div class="col justify-content-center my-3 my-md-0" id="sidebarOpener">
            <div class="d-flex justify-content-center">
                <div class="border border-2 border-muted py-3 px-5 rounded-3 text-center position-relative"
                     style="height: 200px; width: 300px">
                    <div class="d-flex mx-auto justify-content-center align-items-center rounded-circle"
                         style="width: 100px; height: 100px; background-color:lightgrey">
                        <img src="images/icon (2).png" alt="img" class="img-fluid rounded-circle"
                             style="height: 50px; width: 50px"/>
                    </div>
                    <p class="my-4" style="font-size: 25px;">My Accounts</p>
                </div>
            </div>
        </div>
        <div id="mySidebar" class="sidebar">
          <a href="#" onclick="closeSidebar()"><button class="btn btn-danger">Back >></button></a>
          <hr>
          <a href="#" onclick="signin()"><span style="color: red;">Switch Account <i class="fa-solid fa-right-from-bracket"></i></span></a>
          <hr>
          <a href="#" onclick="logout()"><span style="color: red;">LogOut   <i class="fa-solid fa-right-from-bracket"></i></span></a>
          
      </div>


        
        </div>
      </div>
    </div>



    <!-- Heading -->
    <div class="container-fluid mt-5">
      <div class="container">
        <p class="title">Filter By Genre :</p>
      </div>
    </div>

    <!-- Small divs -->
   <div class="container-fluid my-3">
    <div class="container">
     <div class="d-flex">
        <div style="background-color:lightgrey; border-radius: 50%; " class="col-3 col-md-1 text-center p-2">
          <i class="fa-solid fa-book-open my-3" style="font-size: 40px;"></i>
        </div>
        <div class="mx-5">
            <h3 class="mt-3">Science Fiction</h3>
            <p class="text-muted h5">Novels</p>
        </div>
      </div>
      <hr>

      <div class="d-flex">
        <div style="background-color:lightgrey; border-radius: 50%; " class="col-3 col-md-1 text-center p-2">
          <i class="fa-solid fa-book-skull my-3" style="font-size: 40px;"></i>
        </div>
        <div class="mx-5">
            <h3 class="mt-3">Thriller</h3>
            <p class="text-muted h5">Novels</p>
        </div>
      </div>
      <hr>

      <div class="d-flex">
        <div style="background-color:lightgrey; border-radius: 50%; " class="col-3 col-md-1 text-center p-2">
          <i  class="fa-solid fa-book-bookmark my-3"  style="font-size: 40px;"></i>
        </div>
        <div class="mx-5">
            <h3 class="mt-3">Mystery</h3>
            <p class="text-muted h5">Novels</p>
        </div>
      </div>
      <hr>

      <div class="d-flex">
        <div style="background-color:lightgray; border-radius: 50%; " class="col-3 col-md-1 text-center p-2">
          <i  class="fa-solid fa-book-open-reader my-3" style="font-size: 40px;"></i>
        </div>
        <div class="mx-5">
            <h3 class="mt-3">Fantasy</h3>
            <p class="text-muted h5">Novels</p>
        </div>
      </div>
      <hr>

    </div>
   </div>

    <!-- Heading -->
    <div class="container-fluid my-5">
      <div class="container">
        <p class="title">Top Reviews :</p>
      </div>
    </div>

    <!-- top reviews -->
    <div class="wrapper my-5 ">
      <div class="carousel container g-0">
        <div class="mx-2">
          <img class="img-fluid" width="500px" src="images/review.jpeg" alt="img">
        </div>

        <div class="mx-2">
          <img class="img-fluid" width="500px" src="images/review.jpeg" alt="img">
        </div>

        <div class="mx-2">
          <img class="img-fluid" width="500px" src="images/review.jpeg" alt="img">
        </div>

        <div class="mx-2">
          <img class="img-fluid" width="500px" src="images/review.jpeg" alt="img">
        </div>
      </div>
    </div>
    

      <!-- Heading -->
      <div class="container-fluid mt-5">
        <div class="container">
          <p class="title">Search Your Favourite Book :</p>
        </div>
      </div>
      <!-- search -->
      <div class="container-fluid pb-5 ">
        <div class="container">
        <input type="text" name="" id="" placeholder="Please Enter..." class=" border border-3 p-3 w-100 styled-input">
        </div>
      </div>

    <!-- new realise -->
    <div class="container-fluid my-5 pb-3">
      <div class="container d-flex justify-content-center">
        <img src="images/New_Releases3.jpg"  onclick="redirectToAnotherPage()" alt="img" class="img-fluid new_realise" >
      </div>
    </div>



   

     <!-- Heading -->
     <div class="container-fluid my-5">
      <div class="container">
        <p class="title">Specially For You :</p>
      </div>
    </div>

    <!-- books -->
    <div class="slick-slider" id="dynamic-slider"></div>
    <a href="view.html" class="btn btn-danger d-flex w-25 mx-auto mt-5 justify-content-center">View All</a>


    <!-- footer -->
<div class="container-fluid py-1 my-5 bg-black text-white footer">
  <div class="container p-3 footerdiv row m-0 d-flex align-items-center justify-content-center ">
    <div class="col ">
      <h5>Exclusive</h5>
      <p>subscribe</p>
      <p>Get 10% off on your first order</p>
      <input placeholder="Enter Your email >" class="inputfiled">
  </div>
  <div class="col">
      <h5>Support</h5>
      <p>111 Bijoy sarani, Dhaka, <br> DH 1515, Bangladesh.</p>
      <p>exclusive@gmail.com</p>
      <p>+88015-88888-9999</p>
  </div>
  <div class="col">
      <h5>Account</h5>
      <p>My account</p>
      <p>login / register</p>
      <p>Card</p>
      <p>Wishlist</p>
      <p>Shop</p>
  </div>
  <div class="col">
      <h5>Quick Link</h5>
      <p>Privacy Policy</p>
      <p>Terms of use</p>
      <p>FAQs</p>
      <p>Contact</p>
  </div>
  <div class="col">
      <h5>Download App</h5>
      <p>Save $3 with App New User Only</p>
     <img class="img-fluid" src="images/qr code.jpeg" alt="qr code" width="200%">
  </div>

</div>
<div class="mt-5 d-flex justify-content-center" style="margin: 60px auto !important;">
<img class="img-fluid" src="/images/Frame 67.png" alt="@copy">
</div>
  </div>
</div>


<!-- model -->
<!-- Modal HTML -->
<div class="modal fade" id="rent_model" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">title</h5>
        <button type="button" class="close close-model btn btn-primary" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="rentForm">
          <div class="form-group">
            <label for="dateTimePicker">start Date and Time:</label>
            <input type="datetime-local" class="form-control " id="startdateandtime" name="dateTimePicker" required>
            <label for="dateTimePicker">end Date and Time:</label>
            <input type="datetime-local" class="form-control " id="enddateandtime"  name="dateTimePicker" required>
          </div>
          <input type="hidden" id="bookid">
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="storeRentInfo()">Rent Book</button>
        <!-- Add additional buttons if needed -->
      </div>
    </div>
  </div>
</div>

  </body>
  

  <script>
    function redirectToAnotherPage() {
            // Replace 'your-target-page.html' with the actual page you want to redirect to
            window.location.href = 'view.html';
        }

    // Reviews caurosal
    function initSlick() {
    if (window.innerWidth > 1024) {
      $('.carousel').slick({
        slidesToShow: 3,
        dots: false,
        infinite: false,
        prevArrow: null, // Remove the previous button
      nextArrow: null,
      });
    } 
    else
     {
      $('.carousel').slick({
        dots:false,
        infinite:false,
        prevArrow: null, // Remove the previous button
      nextArrow: null,
      });
    }
  }

  $(document).ready(initSlick);

  // Reinitialize on window resize
  $(window).on('resize', function() {
    $('.carousel').slick('unslick');
    initSlick();
  });


// logout
function openSidebar() {
        document.getElementById("mySidebar").style.left = "0";
    }
function closeSidebar() {
        document.getElementById("mySidebar").style.left = "-250px";
    }
function logout() {
        localStorage.removeItem("logedInUsers");
        window.location.href = "index.html";
    }
function signin() {
        window.location.href = 'signup3.html';
    }
    // Add click event to open sidebar
    document.getElementById("sidebarOpener").addEventListener("click", openSidebar, { passive: false });




// for the main books caurosal
$(document).ready(function () {
  const BOOKS = JSON.parse(localStorage.getItem("Book_data")) || [];
 
   
const slickSlider = $("#dynamic-slider");
BOOKS.forEach((book) => {
  slickSlider.append(
    ` <div class="col-12 col-md-6 col-lg-4  d-flex justify-content-center my-3 "  >
                <div class="card" style="width: 18rem;">
                    <img src="${book.path}" style="height: 250px; width: 100%;" class="card-img-top img-fluid" alt="img">
                    <div class="card-body">
                      <h5 class="card-title">${book.title}</h5>
                      <p class="card-text">${book.description}</p>
                      <button id=${book.id} class="btn btn-danger addtocart">Buy ($${book.purchasePrice})</button>
                      <button id=${book.id} class="btn btn-primary renttomodel" >Rent ($${book.rentPrice})</button>
                    </div>
                  </div>
            </div>
            `
  );
});

$(".renttomodel").click(function(){
  let bookId=$(this).attr('id');
  $("#bookid").val(bookId)
        $('#rent_model').modal('show');
      });

$(".close-model").click(function(){
      $('#rent_model').modal('hide');
    });
// Initialize Slick carousel with center mode
slickSlider.slick({
  centerMode: false,
  slidesToShow: 4, // Number of slides to show
  infinite: true,
  arrows: false,
  responsive: [
    {
      breakpoint: 768,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 1,
        rows: 1,
        centerPadding: "50px",
        centerMode: false,
      },
    },
    {
      breakpoint: 600,
      settings: {
        slidesToShow: 1,
        slidesToScroll: 1,
        rows: 1,
        centerPadding: "50px",
        centerMode: false,
      },
    },
  ],
});

let Book_cart = JSON.parse(localStorage.getItem("Book_cart_1")) || [];

console.log(Book_cart);

    function redirectToCart(event) {
    window.location.href = "cart.html";
    }

const addToCartButtons = document.querySelectorAll(".addtocart");
   console.log(addToCartButtons.length);

  addToCartButtons.forEach(function (addToCartButton) {
    addToCartButton.addEventListener('click', function (event) {
    additem_toCart(event.target.id);
    redirectToCart();
  }, { passive: true });
  });

  let My_books = JSON.parse(localStorage.getItem("Book_data")) || [];
  function additem_toCart(id) {
    const index = My_books.findIndex((book) => book.id == id);
    Book_cart.push(My_books[index]);
    localStorage.setItem("Book_cart_1", JSON.stringify(Book_cart));
    console.log(Book_cart);
    
  }


}

);

// model


function storeRentInfo() {
  const user = JSON.parse(localStorage.getItem("logedInUsers"));
  // Get values from the form
  const book_id = $("#bookid").val();
  const startdateandtime = new Date($("#startdateandtime").val());
  const enddateandtime = new Date($("#enddateandtime").val());
  const email = user.email;
console.log("welcome");
  // Retrieve existing rent information from local storage
  const existingRentInfo = JSON.parse(localStorage.getItem("rentInfo")) || [];
console.log(existingRentInfo);
  // Check if the selected time overlaps with any existing rent information
  const isAvailable = checkAvailability(existingRentInfo, book_id, startdateandtime, enddateandtime);

  if (isAvailable) {
    // Create an object with rent information
    const rentInfo = {
      book_id: book_id,
      startdateandtime: startdateandtime,
      enddateandtime: enddateandtime,
      email: email,
    };
    const rent_data= [...existingRentInfo,rentInfo]
    // Store the rent information in local storage
    localStorage.setItem("rentInfo", JSON.stringify(rent_data));

    // Close the modal
    $('#rent_model').modal('hide');
  } else {
    $('#rent_model').modal('hide');
          Toastify({
        text: "Oops! This book seems to be taking a break, try again later!",
        duration: 5000,
        newWindow: true,
        close: true,
        gravity: "top",
        position: "right",
        stopOnFocus: true,
        style: {
          background: "#ff6f61", // A vibrant coral color
          color: "#ffffff", // White text for contrast
          borderRadius: "10px", // Rounded corners for a modern look
          boxShadow: "0 4px 8px rgba(0,0,0,0.1)", // Subtle shadow for depth
        },
  // onClick: function() {
  //   // Your custom callback function here
  // }
}).showToast();

    // Show a message or handle the unavailability
    // alert("This book is not available for the selected time. Please choose a different time.");
  }
}

function checkAvailability(existingRentInfo, book_id, startdateandtime, enddateandtime) {
  const rentInfoArray = Array.from(existingRentInfo);

  // Convert startdateandtime and enddateandtime to timestamps
  const startTimestamp = startdateandtime.getTime();
  const endTimestamp = enddateandtime.getTime();

  // Check if the selected time overlaps with any existing rent information
  for (const rentInfo of rentInfoArray) {
    if (rentInfo.book_id === book_id) {
      const existingStart = new Date(rentInfo.startdateandtime).getTime();
      const existingEnd = new Date(rentInfo.enddateandtime).getTime();

      if (
        (startTimestamp >= existingStart && startTimestamp <= existingEnd) ||
        (endTimestamp >= existingStart && endTimestamp <= existingEnd) ||
        (startTimestamp <= existingStart && endTimestamp >= existingEnd)
      ) {
        console.log("heyyy");
        return false; // Overlapping time, not available
      }
    }
  }

  return true; // No overlapping time, available
}


  </script>
</html>

